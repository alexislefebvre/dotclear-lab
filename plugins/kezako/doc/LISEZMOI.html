<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <base href="http://jean-christophe.dubacq.fr/" />
  <title>Plugin kezako pour Dotclear 2</title>
</head>
<body>
<p>Le plugin Kezako est une extension destinée à pallier dans Dotclear 2
deux manques très précis :</p>
<ul>
<li>On ne peut pas décrire de mots-clefs (tags). Lorsque l'on choisit
une sélection spécifique d'articles concernant un mot-clef spécifique,
par exemple <a href="/tag/debian">debian</a>
ou <a href="/tag/photo">photo</a>, on n'a le mot-clef affiché en haut
sans explications (sur ce blog, ce n'est pas le cas pour debian).</li>
<li>On pouvait décrire les catégories, mais uniquement en une seule
langue. Rajouter une gestion des langues par-dessus le système actuel
nécessitait du travail un peu tordu.</li>
</ul>
<p>J'ai donc implémenté un système qui permet d'associer une description
dans une ou plusieurs langues de son choix à un mot-clef, une catégorie
(qui remplace donc le système existant), ou en fait à ce qu'on veut
(mais je n'ai rien fait qui permette de l'exploiter pour autre chose que
mot-clef ou catégorie). C'est le plugin Kezako.</p>
<hr class="separator" />
<p>Ce système est souple au sens où si rien n'est défini, c'est l'ancien
fonctionnement qui est utilisé. Personne n'est donc obligé de tout
définir.</p>
<p>Cette extension pour Dotclear 2 nécessite de modifier une page du
thème utilisé pour le blog (mais c'est facile, maintenant, avec
l'éditeur de thème). Il faut, dans la page <code>tag.html</code>, là où
on veut la description du tag, entourer la présentation actuelle du
mot-clef par
<code>&lt;tpl:TagDescription&gt;...&lt;/tpl:TagDescription&gt;</code>. Par exemple :</p>
<pre>&lt;tpl:TagDescription&gt;&lt;h2&gt;{{tpl:lang Keyword}} - {{tpl:MetaID}}&lt;/h2&gt;&lt;/tpl:TagDescription&gt;</pre>
<p>Cette extension ajoute une table dans la base de données. Elle n'a
pas été testée avec PostgresQL (mais je ne vois pas pourquoi ça
échouerait, je ne fais que des opérations extrêmement simples).</p>
<p class="pluginlocation">La page de maintenance de cette extension est à cette adresse : <a href="/post/kezako">http://jean-christophe.dubacq.fr/post/kezako</a>.</p>
<h3>Installation</h3>
<p>Utilisez le fichier zippé fourni en annexe de ce billet. Ensuite,
rendez-vous en zone d'administration, donnez le rôle (la permission)
<em>editor</em> aux utilisateurs qui doivent décrire des catégories ou des
mots-clefs. Le menu <em>Kezako</em> devrait apparaître dans l'interface
d'administration pour ces utilisateurs. Faites aussi la modification de
thème décrite plus haut. Si la table n'est pas créée, c'est que vous
n'êtes pas passés par la zone d'administration.</p>
<div class="photo"><a href="/public/photos/dotclear/kezako-settings.png"><img src="/public/photos/dotclear/.kezako-settings_m.jpg" alt="Paramètres de Kezako" title="Paramètres de Kezako" /></a><div class="legende">Paramètres de Kezako</div></div>
<p>Il y a deux paramètres pour cette extension : un qui permet de
remplacer la description des catégories par celles de l'extension, et un
qui permet de dire que l'on veut des catégories en plusieurs langues
(pas uniquement celle du blog). Comme la plupart des blogs sont
unilingues, et que remplacer la définition des catégories n'est pas
utile dans ce cas-là, les deux paramètres sont désactivés par
défaut. Pour une utilisation complète de l'extension, il est possible de
les activer. Notez que la langue du blog doit être non-vide si vous
n'utilisez que celle-ci.</p>
<p>Je n'ai pas trouvé d'extension concurrente à celle-ci.</p>
<p class="version">La version courante de cette extension est 0.8 (local svn  396).</p><p class="licence">Cette extension est sous la licence <a href="http://fsffrance.org/gpl/gpl-fr.fr.html" hreflang="fr">GPL version 2.0</a>.</p>
<h3>Utilisation</h3>
<div class="photo"><a href="/public/photos/dotclear/kezako-list.png"><img src="/public/photos/dotclear/.kezako-list_m.jpg" alt="Liste des descriptions" title="Liste des descriptions" /></a><div class="legende">Liste des descriptions</div></div>
<p>Dans le menu « Blog » de la zone d'administration, vous accédez aux deux
paramètres et à la liste de toutes les descriptions connues. Vous pouvez
les modifier ou les effacer, et en insérer de nouvelles. Quand vous
modifiez ou insérez une description, vous utilisez l'éditeur visuel
habituel de dotclear. L'identifiant de la description pour un mot-clef
est le mot-clef lui-même, la langue est à choisir dans le menu (si vous
avez le choix de la langue), et votre description est entièrement
libre. À noter que pour les mots-clefs, elle remplace complètement ce
qu'il y avait avant (Mot-clef - tag), pas ajouté derrière.</p>
<div class="photo"><a href="/public/photos/dotclear/kezako-entry.png"><img src="/public/photos/dotclear/.kezako-entry_m.jpg" alt="Entrée d'une description" title="Entrée d'une description" /></a><div class="legende">Entrée d'une description</div></div>
<p>Si une description pour une catégorie n'est pas trouvée par Kezako
dans ses propres tables, c'est la description intrinsèque de Dotclear
qui est utilisée à la place. Ainsi, Kezako n'a pas d'effet visible sur
un blog où il est installé mais non utilisé.</p>
<div class="bug"><h3>Pour signaler un bug ou aider cette extension</h3><p>Le mieux est de me contacter <a href="http://jean-christophe.dubacq.fr/pages/Contact">par courrier</a> (pour un bug) ou de laisser un commentaire (pour dire que vous avez testé cette extension). En cas de mise à jour, je modifierai ce billet.</p></div><div class="changelog"><h3>Liste des changements</h3><p>Note : ce journal est non-exhaustif, généré automatiquement, en anglais, et sans doute non-informatif avant 2009.</p><ul><li>Local SVN release 396 (jcdubacq,2009-10-03)<ul> <li>Fix licence blocks</li> </ul></li> <li>Local SVN release 380 (jcdubacq,2009-05-10)<ul> <li>Reduce db fields sizes, hoping to fix <a href="http://lab.dotclear.org/ticket/170">#170</a></li> </ul></li> <li>Local SVN release 366 (jcdubacq,2009-04-30)<ul> <li>Fix licence blocks</li> <li>Clean up code</li> <li>New design for administration interface</li> </ul></li> <li>Local SVN release 270 (jcdubacq,2008-12-22)<ul> <li>Add common filtering attributes</li> </ul></li> <li>Local SVN release 251 (jcdubacq,2008-11-13)<ul> <li>Use categories descriptions by default, fix doc</li> </ul></li> <li>Local SVN release 196 (jcdubacq,2008-07-19)<ul> <li>Reindent kezako plugin, clean, fix, and generally make better. Document it, also.</li> </ul></li> <li>Local SVN release 168 (jcdubacq,2008-05-06)<ul> <li>Order plugins and themes</li> </ul></li> <li>Local SVN release 83 (jcdubacq,2008-02-28)<ul> <li>Add the editor permission support</li> </ul></li> <li>Local SVN release 76 (jcdubacq,2008-02-27)<ul> <li>Initial creation of Kezako plugin</li> </ul></li></ul></div>
<h3>Travail restant à faire</h3>
<ul>
<li>Vérifier que l'extension fonctionne sans le framework dctranslation
(ça devrait).</li>
<li><del>Permettre de désactiver convenablement les catégories dans le
cas d'une plateforme multiblog.</del></li>
</ul>
</body>
</html>